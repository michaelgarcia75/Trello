{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9ea40744\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"home\"\n};\nconst _hoisted_2 = {\n  class: \"newCard\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_CardView = _resolveComponent(\"CardView\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.cards, card => {\n    return _openBlock(), _createBlock(_component_CardView, {\n      key: card.id,\n      card_id: card.id,\n      name: card.name,\n      onUpdatePostTitleHome: _ctx.updatePostTitleHome\n    }, null, 8\n    /* PROPS */\n    , [\"card_id\", \"name\", \"onUpdatePostTitleHome\"]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  )), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Add new card / Press Enter\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.categoryName = $event),\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => $options.createCategory && $options.createCategory(...args), [\"enter\"]))\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.categoryName]])])]);\n}","map":{"version":3,"mappings":";;;;;AACOA,OAAK,EAAC;;;AAQJA,OAAK,EAAC;;;;;uBARbC,oBAgBM,KAhBN,cAgBM,oBAfJA,oBAMEC,SANF,EAME,IANF,EAMEC,YALeC,WAKf,EALOC,IAAa,IAAT;yBADbC,aAMEC,mBANF,EAME;AAJCC,SAAG,EAAEH,IAAI,CAACI,EAIX;AAHCC,aAAO,EAAEL,IAAI,CAACI,EAGf;AAFCE,UAAI,EAAEN,IAAI,CAACM,IAEZ;AADCC,2BAAmB,EAAEC;AACtB,KANF;;AAAA;GAME,CANF;;AAAA,GAeI,GARJC,oBAOM,KAPN,cAOM,iBANJA,oBAKE,OALF,EAKE;AAJAC,QAAI,EAAC,MAIL;AAHAC,eAAW,EAAC,4BAGZ;+DAFSZ,qBAAYa,OAErB;AADCC,WAAK,mDAAQC,2DAAR,EAAsB,SAAtB;AACN,GALF;;AAAA,oBAGWf,qBAGP,CAPN,CAQI,CAhBN","names":["class","_createElementBlock","_Fragment","_renderList","$data","card","_createBlock","_component_CardView","key","id","card_id","name","onUpdatePostTitleHome","_ctx","_createElementVNode","type","placeholder","$event","onKeyup","$options"],"sourceRoot":"","sources":["/home/fdizes/Rendu/C-DEV-121-PAR-1-2-twp-florent.dizes/mvvm_twp/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <CardView\n      v-for=\"card in cards\"\n      :key=\"card.id\"\n      :card_id=\"card.id\"\n      :name=\"card.name\"\n      @updatePostTitleHome=\"updatePostTitleHome\"\n    />\n    <div class=\"newCard\">\n      <input\n        type=\"text\"\n        placeholder=\"Add new card / Press Enter\"\n        v-model=\"categoryName\"\n        @keyup.enter=\"createCategory\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport CardView from \"@/components/CardView.vue\";\n\nexport default {\n  name: \"HomeView\",\n  components: {\n    CardView,\n  },\n  data() {\n    return {\n      cards: [],\n      posts: [],\n      categoryName: \"\",\n    };\n  },\n  methods: {\n    createCategory() {\n      if (this.categoryName !== \"\") {\n        const WPAPI = require(\"wpapi\");\n\n        const wp = new WPAPI({\n          endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n          username: \"fdizes\",\n          password: \"azerty\",\n        });\n        wp.categories()\n          .create({\n            name: this.categoryName,\n          })\n          .then((response) => {\n            console.log(response);\n            window.location.reload();\n          });\n        this.categoryName = \"\";\n      }\n    },\n    updatePostTitleParent(newTitle, id) {\n      console.log(\"coucou3\");\n      this.$forceUpdate();\n      let index = this.posts.findIndex((post) => post.id == id);\n      this.posts[index].title = newTitle;\n    },\n  },\n  mounted() {\n    const WPAPI = require(\"wpapi\");\n\n    const wp = new WPAPI({\n      endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n      username: \"fdizes\",\n      password: \"azerty\",\n    });\n\n    let cards = [];\n    wp.categories()\n      .get()\n      .then((data) => {\n        console.log(data);\n        data.forEach((d) => {\n          cards.push({ id: d.id, name: d.name });\n        });\n        this.cards = cards;\n        this.$store.commit(\"getCards\", this.cards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    let posts = [];\n    wp.posts()\n      .perPage(100)\n      .get()\n      .then((data) => {\n        console.log(data);\n        data.forEach((d) => {\n          posts.push({\n            id: d.id,\n            title: d.title.rendered,\n            content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n            category_id: d.categories[0],\n          });\n        });\n        this.posts = posts;\n        console.log(posts);\n        this.$store.commit(\"getPosts\", this.posts);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    // let comments = [];\n\n    wp.comments()\n      .perPage(100)\n      .get()\n      .then((data) => {\n        console.log(data);\n        // data.forEach((d) => {\n        //   posts.push({\n        //     id: d.id,\n        //     title: d.title.rendered,\n        //     content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n        //     category_id: d.categories[0],\n        //   });\n        // });\n        // this.posts = posts;\n        // console.log(posts);\n        // this.$store.commit(\"getPosts\", this.posts);\n      });\n  },\n};\n</script>\n\n<style scoped>\n.home {\n  display: flex;\n}\n.newCard input {\n  border-radius: 4px;\n  margin-top: 10px;\n  box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.226);\n  transition: transform 0.7s ease-in-out;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}