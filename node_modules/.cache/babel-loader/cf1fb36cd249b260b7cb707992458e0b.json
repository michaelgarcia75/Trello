{"ast":null,"code":"// @ is an alias to /src\nimport CardView from \"@/components/CardView.vue\";\nexport default {\n  name: \"HomeView\",\n  components: {\n    CardView\n  },\n\n  data() {\n    return {\n      cards: [],\n      posts: [],\n      categoryName: \"\"\n    };\n  },\n\n  methods: {\n    createCategory() {\n      if (this.categoryName !== \"\") {\n        const WPAPI = require(\"wpapi\");\n\n        const wp = new WPAPI({\n          endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n          username: \"fdizes\",\n          password: \"azerty\"\n        });\n        wp.categories().create({\n          name: this.categoryName\n        }).then(response => {\n          console.log(response);\n          window.location.reload();\n        });\n        this.categoryName = \"\";\n      }\n    },\n\n    updateposttitleparent(newTitle, id) {\n      console.log(\"coucou3\");\n      this.$forceUpdate();\n      let index = this.posts.findIndex(post => post.id == id);\n      this.posts[index].title = newTitle;\n    }\n\n  },\n\n  mounted() {\n    const WPAPI = require(\"wpapi\");\n\n    const wp = new WPAPI({\n      endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n      username: \"fdizes\",\n      password: \"azerty\"\n    });\n    let cards = [];\n    wp.categories().get().then(data => {\n      console.log(data);\n      data.forEach(d => {\n        cards.push({\n          id: d.id,\n          name: d.name\n        });\n      });\n      this.cards = cards;\n      this.$store.commit(\"getCards\", this.cards);\n    }).catch(err => {\n      console.log(err);\n    });\n    let posts = [];\n    wp.posts().perPage(100).get().then(data => {\n      console.log(data);\n      data.forEach(d => {\n        posts.push({\n          id: d.id,\n          title: d.title.rendered,\n          content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n          category_id: d.categories[0]\n        });\n      });\n      this.posts = posts;\n      console.log(posts);\n      this.$store.commit(\"getPosts\", this.posts);\n    }).catch(err => {\n      console.log(err);\n    }); // let comments = [];\n\n    wp.comments().perPage(100).get().then(data => {\n      console.log(data); // data.forEach((d) => {\n      //   posts.push({\n      //     id: d.id,\n      //     title: d.title.rendered,\n      //     content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n      //     category_id: d.categories[0],\n      //   });\n      // });\n      // this.posts = posts;\n      // console.log(posts);\n      // this.$store.commit(\"getPosts\", this.posts);\n    });\n  }\n\n};","map":{"version":3,"mappings":"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","names":["CardView","name","components","data","cards","posts","categoryName","methods","createCategory","WPAPI","require","wp","endpoint","username","password","categories","create","then","response","console","log","window","location","reload","updateposttitleparent","newTitle","id","$forceUpdate","index","findIndex","post","title","mounted","get","forEach","d","push","$store","commit","catch","err","perPage","rendered","content","replace","category_id","comments"],"sourceRoot":"","sources":["/home/fdizes/Rendu/C-DEV-121-PAR-1-2-twp-florent.dizes/mvvm_twp/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <CardView\n      v-for=\"card in cards\"\n      :key=\"card.id\"\n      :card_id=\"card.id\"\n      :name=\"card.name\"\n      @updateposttitleparent=\"updateposttitleparent\"\n    />\n    <div class=\"newCard\">\n      <input\n        type=\"text\"\n        placeholder=\"Add new card / Press Enter\"\n        v-model=\"categoryName\"\n        @keyup.enter=\"createCategory\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport CardView from \"@/components/CardView.vue\";\n\nexport default {\n  name: \"HomeView\",\n  components: {\n    CardView,\n  },\n  data() {\n    return {\n      cards: [],\n      posts: [],\n      categoryName: \"\",\n    };\n  },\n  methods: {\n    createCategory() {\n      if (this.categoryName !== \"\") {\n        const WPAPI = require(\"wpapi\");\n\n        const wp = new WPAPI({\n          endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n          username: \"fdizes\",\n          password: \"azerty\",\n        });\n        wp.categories()\n          .create({\n            name: this.categoryName,\n          })\n          .then((response) => {\n            console.log(response);\n            window.location.reload();\n          });\n        this.categoryName = \"\";\n      }\n    },\n    updateposttitleparent(newTitle, id) {\n      console.log(\"coucou3\");\n      this.$forceUpdate();\n      let index = this.posts.findIndex((post) => post.id == id);\n      this.posts[index].title = newTitle;\n    },\n  },\n  mounted() {\n    const WPAPI = require(\"wpapi\");\n\n    const wp = new WPAPI({\n      endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n      username: \"fdizes\",\n      password: \"azerty\",\n    });\n\n    let cards = [];\n    wp.categories()\n      .get()\n      .then((data) => {\n        console.log(data);\n        data.forEach((d) => {\n          cards.push({ id: d.id, name: d.name });\n        });\n        this.cards = cards;\n        this.$store.commit(\"getCards\", this.cards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    let posts = [];\n    wp.posts()\n      .perPage(100)\n      .get()\n      .then((data) => {\n        console.log(data);\n        data.forEach((d) => {\n          posts.push({\n            id: d.id,\n            title: d.title.rendered,\n            content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n            category_id: d.categories[0],\n          });\n        });\n        this.posts = posts;\n        console.log(posts);\n        this.$store.commit(\"getPosts\", this.posts);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    // let comments = [];\n\n    wp.comments()\n      .perPage(100)\n      .get()\n      .then((data) => {\n        console.log(data);\n        // data.forEach((d) => {\n        //   posts.push({\n        //     id: d.id,\n        //     title: d.title.rendered,\n        //     content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n        //     category_id: d.categories[0],\n        //   });\n        // });\n        // this.posts = posts;\n        // console.log(posts);\n        // this.$store.commit(\"getPosts\", this.posts);\n      });\n  },\n};\n</script>\n\n<style scoped>\n.home {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: start;\n}\n.newCard input {\n  width: 300px;\n  border-radius: 4px;\n  margin: 10px 10px;\n  box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.226);\n  transition: transform 0.7s ease-in-out;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}