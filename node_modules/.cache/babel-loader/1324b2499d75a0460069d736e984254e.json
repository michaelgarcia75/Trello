{"ast":null,"code":"// @ is an alias to /src\nimport PostView from \"@/components/PostView.vue\";\nexport default {\n  name: \"CardView\",\n\n  data() {\n    return {\n      postName: \"\",\n      tempName: this.name\n    };\n  },\n\n  components: {\n    PostView\n  },\n  props: {\n    card_id: Number,\n    name: String\n  },\n  emit: [\"updateposttitleparent\"],\n  computed: {\n    postList() {\n      return this.$store.getters.getPostsByCardId(this.card_id);\n    }\n\n  },\n  methods: {\n    updateCardName() {\n      const WPAPI = require(\"wpapi\");\n\n      const wp = new WPAPI({\n        endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n        username: \"fdizes\",\n        password: \"azerty\"\n      });\n      wp.categories().id(this.card_id).update({\n        name: this.tempName\n      }).then(function (response) {\n        console.log(response);\n      });\n    },\n\n    createPost() {\n      if (this.postName !== \"\") {\n        const WPAPI = require(\"wpapi\");\n\n        const wp = new WPAPI({\n          endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n          username: \"fdizes\",\n          password: \"azerty\"\n        });\n        wp.posts().create({\n          title: this.postName,\n          content: \"\",\n          categories: this.card_id,\n          status: \"publish\"\n        }).then(data => {\n          console.log(data);\n          window.location.reload();\n        });\n        this.postName = \"\";\n      }\n    },\n\n    updateposttitleparent(newTitle, id) {\n      console.log(\"coucou2\");\n      this.$forceUpdate();\n      this.$emit(\"updateposttitleparent\", newTitle, id);\n    },\n\n    deleteCategory() {\n      const WPAPI = require(\"wpapi\");\n\n      const wp = new WPAPI({\n        endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n        username: \"fdizes\",\n        password: \"azerty\"\n      });\n      this.postList.forEach(post => {\n        wp.posts().id(post.id).param(\"force\", true).delete().then(data => {\n          console.log(data);\n          window.location.reload();\n        });\n      });\n      wp.categories().id(this.card_id).param(\"force\", true).delete().then(data => {\n        console.log(data);\n        window.location.reload();\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["PostView","name","data","postName","tempName","components","props","card_id","Number","String","emit","computed","postList","$store","getters","getPostsByCardId","methods","updateCardName","WPAPI","require","wp","endpoint","username","password","categories","id","update","then","response","console","log","createPost","posts","create","title","content","status","window","location","reload","updateposttitleparent","newTitle","$forceUpdate","$emit","deleteCategory","forEach","post","param","delete"],"sourceRoot":"","sources":["/home/fdizes/Rendu/C-DEV-121-PAR-1-2-twp-florent.dizes/mvvm_twp/src/components/CardView.vue"],"sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <textarea\r\n      class=\"name\"\r\n      spellcheck=\"false\"\r\n      v-model=\"tempName\"\r\n      @blur=\"updateCardName\"\r\n    />\r\n    <PostView\r\n      v-for=\"post in postList\"\r\n      :key=\"post.id\"\r\n      :post_id=\"post.id\"\r\n      :title=\"post.title\"\r\n      :content=\"post.content\"\r\n      :card_name=\"name\"\r\n      @updateposttitleparent=\"updateposttitleparent\"\r\n    />\r\n    <input\r\n      class=\"input-post\"\r\n      type=\"text\"\r\n      placeholder=\"Create a Post / Press enter\"\r\n      v-model=\"postName\"\r\n      @keyup.enter=\"createPost\"\r\n    />\r\n    <svg\r\n      class=\"delbtn\"\r\n      @click=\"deleteCategory\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 512 512\"\r\n    >\r\n      <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->\r\n      <path\r\n        d=\"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM175 208.1L222.1 255.1L175 303C165.7 312.4 165.7 327.6 175 336.1C184.4 346.3 199.6 346.3 208.1 336.1L255.1 289.9L303 336.1C312.4 346.3 327.6 346.3 336.1 336.1C346.3 327.6 346.3 312.4 336.1 303L289.9 255.1L336.1 208.1C346.3 199.6 346.3 184.4 336.1 175C327.6 165.7 312.4 165.7 303 175L255.1 222.1L208.1 175C199.6 165.7 184.4 165.7 175 175C165.7 184.4 165.7 199.6 175 208.1V208.1z\"\r\n      />\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport PostView from \"@/components/PostView.vue\";\r\n\r\nexport default {\r\n  name: \"CardView\",\r\n  data() {\r\n    return {\r\n      postName: \"\",\r\n      tempName: this.name,\r\n    };\r\n  },\r\n  components: {\r\n    PostView,\r\n  },\r\n  props: {\r\n    card_id: Number,\r\n    name: String,\r\n  },\r\n  emit: [\"updateposttitleparent\"],\r\n  computed: {\r\n    postList() {\r\n      return this.$store.getters.getPostsByCardId(this.card_id);\r\n    },\r\n  },\r\n  methods: {\r\n    updateCardName() {\r\n      const WPAPI = require(\"wpapi\");\r\n\r\n      const wp = new WPAPI({\r\n        endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\r\n        username: \"fdizes\",\r\n        password: \"azerty\",\r\n      });\r\n      wp.categories()\r\n        .id(this.card_id)\r\n        .update({\r\n          name: this.tempName,\r\n        })\r\n        .then(function (response) {\r\n          console.log(response);\r\n        });\r\n    },\r\n    createPost() {\r\n      if (this.postName !== \"\") {\r\n        const WPAPI = require(\"wpapi\");\r\n\r\n        const wp = new WPAPI({\r\n          endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\r\n          username: \"fdizes\",\r\n          password: \"azerty\",\r\n        });\r\n        wp.posts()\r\n          .create({\r\n            title: this.postName,\r\n            content: \"\",\r\n            categories: this.card_id,\r\n            status: \"publish\",\r\n          })\r\n          .then((data) => {\r\n            console.log(data);\r\n            window.location.reload();\r\n          });\r\n        this.postName = \"\";\r\n      }\r\n    },\r\n    updateposttitleparent(newTitle, id) {\r\n      console.log(\"coucou2\");\r\n      this.$forceUpdate();\r\n      this.$emit(\"updateposttitleparent\", newTitle, id);\r\n    },\r\n    deleteCategory() {\r\n      const WPAPI = require(\"wpapi\");\r\n\r\n      const wp = new WPAPI({\r\n        endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\r\n        username: \"fdizes\",\r\n        password: \"azerty\",\r\n      });\r\n      this.postList.forEach((post) => {\r\n        wp.posts()\r\n          .id(post.id)\r\n          .param(\"force\", true)\r\n          .delete()\r\n          .then((data) => {\r\n            console.log(data);\r\n            window.location.reload();\r\n          });\r\n      });\r\n      wp.categories()\r\n        .id(this.card_id)\r\n        .param(\"force\", true)\r\n        .delete()\r\n        .then((data) => {\r\n          console.log(data);\r\n          window.location.reload();\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 300px;\r\n  width: 300px;\r\n  min-height: 100px;\r\n  height: fit-content;\r\n  background-color: rgb(131, 201, 245, 0.7);\r\n  margin: 10px 10px;\r\n  text-align: left;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  border: solid 1px black;\r\n}\r\n.name {\r\n  box-sizing: border-box;\r\n  height: 70px;\r\n  width: 100%;\r\n  font-weight: 600;\r\n  justify-content: left;\r\n  font-size: 25px;\r\n  background: none;\r\n  outline: none;\r\n  border-style: none;\r\n  resize: none;\r\n  overflow: hidden;\r\n}\r\n.card p {\r\n  font-weight: 750;\r\n  padding: 5px;\r\n}\r\n\r\n.delbtn {\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 15px;\r\n  width: 20px;\r\n  cursor: pointer;\r\n  border-radius: 100%;\r\n}\r\n\r\n.input-post {\r\n  margin-top: 5px;\r\n  border-radius: 5px;\r\n  padding: 5px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}