{"ast":null,"code":"// @ is an alias to /src\nimport CardView from \"@/components/CardView.vue\";\nexport default {\n  name: \"HomeView\",\n  components: {\n    CardView\n  },\n\n  data() {\n    return {\n      cards: [],\n      posts: [],\n      categoryName: \"\"\n    };\n  },\n\n  methods: {\n    createCategory() {\n      if (this.categoryName !== \"\") {\n        const WPAPI = require(\"wpapi\");\n\n        const wp = new WPAPI({\n          endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n          username: \"fdizes\",\n          password: \"azerty\"\n        });\n        wp.categories().create({\n          name: this.categoryName\n        }).then(response => {\n          console.log(response);\n          window.location.reload();\n        });\n        this.categoryName = \"\";\n      }\n    },\n\n    updatePostTitleParent(newTitle, id) {\n      console.log(\"coucou2\");\n      this.$forceUpdate();\n    }\n\n  },\n\n  mounted() {\n    const WPAPI = require(\"wpapi\");\n\n    const wp = new WPAPI({\n      endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n      username: \"fdizes\",\n      password: \"azerty\"\n    });\n    let cards = [];\n    wp.categories().get().then(data => {\n      console.log(data);\n      data.forEach(d => {\n        cards.push({\n          id: d.id,\n          name: d.name\n        });\n      });\n      this.cards = cards;\n      this.$store.commit(\"getCards\", this.cards);\n    }).catch(err => {\n      console.log(err);\n    });\n    let posts = [];\n    wp.posts().perPage(100).get().then(data => {\n      console.log(data);\n      data.forEach(d => {\n        posts.push({\n          id: d.id,\n          title: d.title.rendered,\n          content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n          category_id: d.categories[0]\n        });\n      });\n      this.posts = posts;\n      console.log(posts);\n      this.$store.commit(\"getPosts\", this.posts);\n    }).catch(err => {\n      console.log(err);\n    }); // let comments = [];\n\n    wp.comments().perPage(100).get().then(data => {\n      console.log(data); // data.forEach((d) => {\n      //   posts.push({\n      //     id: d.id,\n      //     title: d.title.rendered,\n      //     content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n      //     category_id: d.categories[0],\n      //   });\n      // });\n      // this.posts = posts;\n      // console.log(posts);\n      // this.$store.commit(\"getPosts\", this.posts);\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAqBA;AACA,OAAOA,QAAP,MAAqB,2BAArB;AAEA,eAAe;AACbC,MAAI,EAAE,UADO;AAEbC,YAAU,EAAE;AACVF;AADU,GAFC;;AAKbG,MAAI,GAAG;AACL,WAAO;AACLC,WAAK,EAAE,EADF;AAELC,WAAK,EAAE,EAFF;AAGLC,kBAAY,EAAE;AAHT,KAAP;AAKD,GAXY;;AAYbC,SAAO,EAAE;AACPC,kBAAc,GAAG;AACf,UAAI,KAAKF,YAAL,KAAsB,EAA1B,EAA8B;AAC5B,cAAMG,KAAI,GAAIC,OAAO,CAAC,OAAD,CAArB;;AAEA,cAAMC,EAAC,GAAI,IAAIF,KAAJ,CAAU;AACnBG,kBAAQ,EAAE,+CADS;AAEnBC,kBAAQ,EAAE,QAFS;AAGnBC,kBAAQ,EAAE;AAHS,SAAV,CAAX;AAKAH,UAAE,CAACI,UAAH,GACGC,MADH,CACU;AACNf,cAAI,EAAE,KAAKK;AADL,SADV,EAIGW,IAJH,CAISC,QAAD,IAAc;AAClBC,iBAAO,CAACC,GAAR,CAAYF,QAAZ;AACAG,gBAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,SAPH;AAQA,aAAKjB,YAAL,GAAoB,EAApB;AACF;AACD,KApBM;;AAqBPkB,yBAAqB,CAACC,QAAD,EAAWC,EAAX,EAAe;AAClCP,aAAO,CAACC,GAAR,CAAY,SAAZ;AACA,WAAKO,YAAL;AACD;;AAxBM,GAZI;;AAsCbC,SAAO,GAAG;AACR,UAAMnB,KAAI,GAAIC,OAAO,CAAC,OAAD,CAArB;;AAEA,UAAMC,EAAC,GAAI,IAAIF,KAAJ,CAAU;AACnBG,cAAQ,EAAE,+CADS;AAEnBC,cAAQ,EAAE,QAFS;AAGnBC,cAAQ,EAAE;AAHS,KAAV,CAAX;AAMA,QAAIV,KAAI,GAAI,EAAZ;AACAO,MAAE,CAACI,UAAH,GACGc,GADH,GAEGZ,IAFH,CAESd,IAAD,IAAU;AACdgB,aAAO,CAACC,GAAR,CAAYjB,IAAZ;AACAA,UAAI,CAAC2B,OAAL,CAAcC,CAAD,IAAO;AAClB3B,aAAK,CAAC4B,IAAN,CAAW;AAAEN,YAAE,EAAEK,CAAC,CAACL,EAAR;AAAYzB,cAAI,EAAE8B,CAAC,CAAC9B;AAApB,SAAX;AACD,OAFD;AAGA,WAAKG,KAAL,GAAaA,KAAb;AACA,WAAK6B,MAAL,CAAYC,MAAZ,CAAmB,UAAnB,EAA+B,KAAK9B,KAApC;AACD,KATH,EAUG+B,KAVH,CAUUC,GAAD,IAAS;AACdjB,aAAO,CAACC,GAAR,CAAYgB,GAAZ;AACD,KAZH;AAcA,QAAI/B,KAAI,GAAI,EAAZ;AACAM,MAAE,CAACN,KAAH,GACGgC,OADH,CACW,GADX,EAEGR,GAFH,GAGGZ,IAHH,CAGSd,IAAD,IAAU;AACdgB,aAAO,CAACC,GAAR,CAAYjB,IAAZ;AACAA,UAAI,CAAC2B,OAAL,CAAcC,CAAD,IAAO;AAClB1B,aAAK,CAAC2B,IAAN,CAAW;AACTN,YAAE,EAAEK,CAAC,CAACL,EADG;AAETY,eAAK,EAAEP,CAAC,CAACO,KAAF,CAAQC,QAFN;AAGTC,iBAAO,EAAET,CAAC,CAACS,OAAF,CAAUD,QAAV,CAAmBE,OAAnB,CAA2B,eAA3B,EAA4C,EAA5C,CAHA;AAITC,qBAAW,EAAEX,CAAC,CAAChB,UAAF,CAAa,CAAb;AAJJ,SAAX;AAMD,OAPD;AAQA,WAAKV,KAAL,GAAaA,KAAb;AACAc,aAAO,CAACC,GAAR,CAAYf,KAAZ;AACA,WAAK4B,MAAL,CAAYC,MAAZ,CAAmB,UAAnB,EAA+B,KAAK7B,KAApC;AACD,KAhBH,EAiBG8B,KAjBH,CAiBUC,GAAD,IAAS;AACdjB,aAAO,CAACC,GAAR,CAAYgB,GAAZ;AACD,KAnBH,EAzBQ,CA8CR;;AAEAzB,MAAE,CAACgC,QAAH,GACGN,OADH,CACW,GADX,EAEGR,GAFH,GAGGZ,IAHH,CAGSd,IAAD,IAAU;AACdgB,aAAO,CAACC,GAAR,CAAYjB,IAAZ,EADc,CAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KAhBH;AAiBD;;AAvGY,CAAf","names":["CardView","name","components","data","cards","posts","categoryName","methods","createCategory","WPAPI","require","wp","endpoint","username","password","categories","create","then","response","console","log","window","location","reload","updatePostTitleParent","newTitle","id","$forceUpdate","mounted","get","forEach","d","push","$store","commit","catch","err","perPage","title","rendered","content","replace","category_id","comments"],"sourceRoot":"","sources":["/home/fdizes/Rendu/C-DEV-121-PAR-1-2-twp-florent.dizes/mvvm_twp/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <CardView\n      v-for=\"card in cards\"\n      :key=\"card.id\"\n      :card_id=\"card.id\"\n      :name=\"card.name\"\n      @updatePostTitleParent=\"updatePostTitleParent\"\n    />\n    <div class=\"newCard\">\n      <input\n        type=\"text\"\n        placeholder=\"Add new card / Press Enter\"\n        v-model=\"categoryName\"\n        @keyup.enter=\"createCategory\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport CardView from \"@/components/CardView.vue\";\n\nexport default {\n  name: \"HomeView\",\n  components: {\n    CardView,\n  },\n  data() {\n    return {\n      cards: [],\n      posts: [],\n      categoryName: \"\",\n    };\n  },\n  methods: {\n    createCategory() {\n      if (this.categoryName !== \"\") {\n        const WPAPI = require(\"wpapi\");\n\n        const wp = new WPAPI({\n          endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n          username: \"fdizes\",\n          password: \"azerty\",\n        });\n        wp.categories()\n          .create({\n            name: this.categoryName,\n          })\n          .then((response) => {\n            console.log(response);\n            window.location.reload();\n          });\n        this.categoryName = \"\";\n      }\n    },\n    updatePostTitleParent(newTitle, id) {\n      console.log(\"coucou2\");\n      this.$forceUpdate();\n    },\n  },\n  mounted() {\n    const WPAPI = require(\"wpapi\");\n\n    const wp = new WPAPI({\n      endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n      username: \"fdizes\",\n      password: \"azerty\",\n    });\n\n    let cards = [];\n    wp.categories()\n      .get()\n      .then((data) => {\n        console.log(data);\n        data.forEach((d) => {\n          cards.push({ id: d.id, name: d.name });\n        });\n        this.cards = cards;\n        this.$store.commit(\"getCards\", this.cards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    let posts = [];\n    wp.posts()\n      .perPage(100)\n      .get()\n      .then((data) => {\n        console.log(data);\n        data.forEach((d) => {\n          posts.push({\n            id: d.id,\n            title: d.title.rendered,\n            content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n            category_id: d.categories[0],\n          });\n        });\n        this.posts = posts;\n        console.log(posts);\n        this.$store.commit(\"getPosts\", this.posts);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    // let comments = [];\n\n    wp.comments()\n      .perPage(100)\n      .get()\n      .then((data) => {\n        console.log(data);\n        // data.forEach((d) => {\n        //   posts.push({\n        //     id: d.id,\n        //     title: d.title.rendered,\n        //     content: d.content.rendered.replace(/(<([^>]+)>)/gi, \"\"),\n        //     category_id: d.categories[0],\n        //   });\n        // });\n        // this.posts = posts;\n        // console.log(posts);\n        // this.$store.commit(\"getPosts\", this.posts);\n      });\n  },\n};\n</script>\n\n<style scoped>\n.home {\n  display: flex;\n}\n.newCard input {\n  border-radius: 4px;\n  margin-top: 10px;\n  box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.226);\n  transition: transform 0.7s ease-in-out;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}