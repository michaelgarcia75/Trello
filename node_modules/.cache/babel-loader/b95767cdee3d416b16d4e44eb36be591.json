{"ast":null,"code":"// @ is an alias to /src\nimport DetailModale from \"@/components/DetailModale.vue\";\nimport { VueDraggableNext } from \"vue-draggable-next\";\nexport default {\n  name: \"PostView\",\n  components: {\n    DetailModale,\n    draggable: VueDraggableNext\n  },\n\n  data() {\n    return {\n      showDetailModale: false,\n      tempTitle: this.title\n    };\n  },\n\n  props: {\n    post_id: Number,\n    title: String,\n    content: String,\n    card_name: String\n  },\n  emit: [\"updateposttitleparent\"],\n  methods: {\n    toggleDetailModale() {\n      this.showDetailModale = !this.showDetailModale;\n\n      if (!this.showDetailModale) {// window.location.reload();\n      }\n    },\n\n    updateposttitleparent(newTitle) {\n      this.tempTitle = newTitle;\n      console.log(\"coucou\");\n      this.$forceUpdate();\n      this.$emit(\"updateposttitleparent\", this.tempTitle, this.post_id);\n    },\n\n    deletePost() {\n      const WPAPI = require(\"wpapi\");\n\n      const wp = new WPAPI({\n        endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\n        username: \"fdizes\",\n        password: \"azerty\"\n      });\n      wp.posts().id(this.post_id).param(\"force\", true).delete().then(data => {\n        console.log(data);\n        window.location.reload();\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4CA;AACA,OAAOA,YAAP,MAAyB,+BAAzB;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AAEA,eAAe;AACbC,MAAI,EAAE,UADO;AAEbC,YAAU,EAAE;AACVH,gBADU;AAEVI,aAAS,EAAEH;AAFD,GAFC;;AAMbI,MAAI,GAAG;AACL,WAAO;AACLC,sBAAgB,EAAE,KADb;AAELC,eAAS,EAAE,KAAKC;AAFX,KAAP;AAID,GAXY;;AAYbC,OAAK,EAAE;AACLC,WAAO,EAAEC,MADJ;AAELH,SAAK,EAAEI,MAFF;AAGLC,WAAO,EAAED,MAHJ;AAILE,aAAS,EAAEF;AAJN,GAZM;AAkBbG,MAAI,EAAE,CAAC,uBAAD,CAlBO;AAmBbC,SAAO,EAAE;AACPC,sBAAkB,GAAG;AACnB,WAAKX,gBAAL,GAAwB,CAAC,KAAKA,gBAA9B;;AACA,UAAI,CAAC,KAAKA,gBAAV,EAA4B,CAC1B;AACF;AACD,KANM;;AAOPY,yBAAqB,CAACC,QAAD,EAAW;AAC9B,WAAKZ,SAAL,GAAiBY,QAAjB;AACAC,aAAO,CAACC,GAAR,CAAY,QAAZ;AACA,WAAKC,YAAL;AACA,WAAKC,KAAL,CAAW,uBAAX,EAAoC,KAAKhB,SAAzC,EAAoD,KAAKG,OAAzD;AACD,KAZM;;AAaPc,cAAU,GAAG;AACX,YAAMC,KAAI,GAAIC,OAAO,CAAC,OAAD,CAArB;;AAEA,YAAMC,EAAC,GAAI,IAAIF,KAAJ,CAAU;AACnBG,gBAAQ,EAAE,+CADS;AAEnBC,gBAAQ,EAAE,QAFS;AAGnBC,gBAAQ,EAAE;AAHS,OAAV,CAAX;AAMAH,QAAE,CAACI,KAAH,GACGC,EADH,CACM,KAAKtB,OADX,EAEGuB,KAFH,CAES,OAFT,EAEkB,IAFlB,EAGGC,MAHH,GAIGC,IAJH,CAIS9B,IAAD,IAAU;AACde,eAAO,CAACC,GAAR,CAAYhB,IAAZ;AACA+B,cAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,OAPH;AAQD;;AA9BM;AAnBI,CAAf","names":["DetailModale","VueDraggableNext","name","components","draggable","data","showDetailModale","tempTitle","title","props","post_id","Number","String","content","card_name","emit","methods","toggleDetailModale","updateposttitleparent","newTitle","console","log","$forceUpdate","$emit","deletePost","WPAPI","require","wp","endpoint","username","password","posts","id","param","delete","then","window","location","reload"],"sourceRoot":"","sources":["/home/fdizes/Rendu/C-DEV-121-PAR-1-2-twp-florent.dizes/mvvm_twp/src/components/PostView.vue"],"sourcesContent":["<template>\r\n  <draggable :options=\"{ group: 'cards' }\" group=\"cards\" ghostClass=\"ghost\">\r\n    <span\r\n      class=\"element-card\"\r\n      v-for=\"(card, index) in cards\"\r\n      :key=\"index\"\r\n      @click=\"togglePopup(card)\"\r\n    >\r\n      {{ card.name }}\r\n    </span>\r\n  </draggable>\r\n  <draggable\r\n    :options=\"{ group: 'card' }\"\r\n    group=\"card\"\r\n    ghostClass=\"ghost\"\r\n    class=\"card-draggable\"\r\n  >\r\n    <div class=\"post\">\r\n      <p @click=\"toggleDetailModale\">{{ title }}</p>\r\n      <svg\r\n        class=\"delbtn\"\r\n        @click=\"deletePost\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        viewBox=\"0 0 512 512\"\r\n      >\r\n        <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->\r\n        <path\r\n          d=\"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM175 208.1L222.1 255.1L175 303C165.7 312.4 165.7 327.6 175 336.1C184.4 346.3 199.6 346.3 208.1 336.1L255.1 289.9L303 336.1C312.4 346.3 327.6 346.3 336.1 336.1C346.3 327.6 346.3 312.4 336.1 303L289.9 255.1L336.1 208.1C346.3 199.6 346.3 184.4 336.1 175C327.6 165.7 312.4 165.7 303 175L255.1 222.1L208.1 175C199.6 165.7 184.4 165.7 175 175C165.7 184.4 165.7 199.6 175 208.1V208.1z\"\r\n        />\r\n      </svg>\r\n    </div>\r\n    <DetailModale\r\n      :showDetailModale=\"showDetailModale\"\r\n      :toggleDetailModale=\"toggleDetailModale\"\r\n      :post_id=\"post_id\"\r\n      :title=\"tempTitle\"\r\n      :content=\"content\"\r\n      :card_name=\"card_name\"\r\n      @updateposttitleparent=\"updateposttitleparent\"\r\n    />\r\n  </draggable>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport DetailModale from \"@/components/DetailModale.vue\";\r\nimport { VueDraggableNext } from \"vue-draggable-next\";\r\n\r\nexport default {\r\n  name: \"PostView\",\r\n  components: {\r\n    DetailModale,\r\n    draggable: VueDraggableNext,\r\n  },\r\n  data() {\r\n    return {\r\n      showDetailModale: false,\r\n      tempTitle: this.title,\r\n    };\r\n  },\r\n  props: {\r\n    post_id: Number,\r\n    title: String,\r\n    content: String,\r\n    card_name: String,\r\n  },\r\n  emit: [\"updateposttitleparent\"],\r\n  methods: {\r\n    toggleDetailModale() {\r\n      this.showDetailModale = !this.showDetailModale;\r\n      if (!this.showDetailModale) {\r\n        // window.location.reload();\r\n      }\r\n    },\r\n    updateposttitleparent(newTitle) {\r\n      this.tempTitle = newTitle;\r\n      console.log(\"coucou\");\r\n      this.$forceUpdate();\r\n      this.$emit(\"updateposttitleparent\", this.tempTitle, this.post_id);\r\n    },\r\n    deletePost() {\r\n      const WPAPI = require(\"wpapi\");\r\n\r\n      const wp = new WPAPI({\r\n        endpoint: \"http://localhost/wordpress/index.php/wp-json/\",\r\n        username: \"fdizes\",\r\n        password: \"azerty\",\r\n      });\r\n\r\n      wp.posts()\r\n        .id(this.post_id)\r\n        .param(\"force\", true)\r\n        .delete()\r\n        .then((data) => {\r\n          console.log(data);\r\n          window.location.reload();\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.post {\r\n  background-color: rgb(214, 219, 184);\r\n  padding: 5px;\r\n  /* margin: 5px 0; */\r\n  margin-bottom: 5px;\r\n  border-radius: 2px;\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n\r\n.post:hover .delbtn {\r\n  visibility: visible;\r\n}\r\n\r\n.post p {\r\n  margin: 5px auto;\r\n}\r\n\r\n.delbtn {\r\n  position: absolute;\r\n  top: 13px;\r\n  right: 15px;\r\n  width: 17px;\r\n  cursor: pointer;\r\n  border-radius: 100%;\r\n  visibility: hidden;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}